<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Turni Settimanali</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f2f2f2; }
    h2 { text-align: center; }
    .selector { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
    select { padding: 10px; font-size: 16px; border-radius: 8px; }
    table { width: 100%; border-collapse: collapse; background: #fff; border-radius: 10px; overflow: hidden; }
    th, td { padding: 10px; text-align: center; border-bottom: 1px solid #ddd; font-size: 15px; }
    th { background: #222; color: #fff; }
    .blu { background: #cfe3ff; }
    .giallo { background: #fff4b8; }
    .verde { background: #caffc8; }
    .normale { background: #ffffff; }
@media (max-width: 600px) {
  body { padding: 10px; }
  th, td { padding: 8px; font-size: 14px; }
  select { font-size: 14px; padding: 8px; }
  table { font-size: 14px; display: block; overflow-x: auto; }
}
  </style>
</head>
<body>
<h2>Turni Settimanali</h2>

<div class="selector">
  <select id="nomeSelect">
    <option value="">Seleziona Nome</option>
    <option value="claudia">Claudia Trevisan</option>
    <option value="fabio">Papurello Fabio</option>
    <option value="chiara">Chiara Zaccurri</option>
    <option value="marco">Marco Battistioli</option>
  </select>

  <select id="settimanaSelect">
    <option value="1">Settimana 1</option>
    <option value="2">Settimana 2</option>
    <option value="3">Settimana 3</option>
    <option value="4">Settimana 4</option>
  </select>
</div>

<table id="tabella">
  <thead>
    <tr>
      <th>Giorno</th>
      <th>Ore</th>
      <th>Dettaglio</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const giorni = ["L", "M", "M2", "G", "V", "S", "D"];
const nomiGiorni = { L:"Lunedì", M:"Martedì", M2:"Mercoledì", G:"Giovedì", V:"Venerdì", S:"Sabato", D:"Domenica" };

let turni = {}; // dati caricati da Firestore

// Config Firebase (metti i tuoi dati qui)
const firebaseConfig = {
  apiKey: "APIKEY",
  authDomain: "PROJECT.firebaseapp.com",
  projectId: "PROJECT",
  storageBucket: "PROJECT.appspot.com",
  messagingSenderId: "SENDERID",
  appId: "APPID"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// Funzione per caricare i dati da Firestore
async function caricaTurni() {
  const snapshot = await db.collection("turni").get();
  snapshot.forEach(doc => {
    turni[doc.id] = doc.data(); // doc.id deve essere "claudia", "fabio", etc.
  });
  aggiornaTabella(); // aggiorna la tabella appena caricato
}

function aggiornaTabella() {
  const nome = document.getElementById("nomeSelect").value;
  const settimana = document.getElementById("settimanaSelect").value;
  const tbody = document.querySelector("tbody");
  tbody.innerHTML = "";
  if (!nome || !settimana || !turni[nome] || !turni[nome][settimana]) return;

  giorni.forEach(g => {
    const t = turni[nome][settimana][g];
    const tr = document.createElement("tr");
    tr.className = t.colore;
    tr.innerHTML = `<td>${nomiGiorni[g]}</td><td>${t.ore}</td><td>${t.det}</td>`;
    tbody.appendChild(tr);
  });
}

document.getElementById("nomeSelect").addEventListener("change", aggiornaTabella);
document.getElementById("settimanaSelect").addEventListener("change", aggiornaTabella);

// carico subito i dati
caricaTurni();
</script>
</body>
</html>

